generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_PRISMA_URL")
}

model User {
  id        String   @id @default(uuid()) @db.Uuid
  name      String?
  email     String   @unique
  password  String?
  ava       String?
  provider  String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Product {
  id             String    @id @default(uuid()) @db.Uuid
  serialNumber   String
  isNew          Boolean   @default(false)
  photo          String?
  title          String
  type           String?
  specification  String?
  guaranteeStart DateTime?
  guaranteeEnd   DateTime?
  date           DateTime?
  orderId        String?   @db.Uuid
  prices         Price[]
  order          Order?    @relation(fields: [orderId], references: [id], onDelete: Cascade)

  @@index([serialNumber])
}

model Order {
  id               String    @id @default(uuid()) @db.Uuid
  title            String
  date             DateTime
  description      String?
  amountOfProducts Int?
  products         Product[]
}

model Price {
  id        String   @id @default(uuid()) @db.Uuid
  value     Int
  symbol    Currency
  isDefault Boolean  @default(false)
  productId String   @db.Uuid
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId])
}

enum Currency {
  USD
  UAH
}
